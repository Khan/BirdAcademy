{"version":3,"sources":["src/blip.js"],"names":[],"mappings":"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","file":"src/blip.js","sourcesContent":["/*\n * Downloaded from https://github.com/jshanley/blip @4ada073. I didn't feel like doing\n * fancier packaging dependency work here.\n *\n * License follows:\n *\n * Copyright (c) 2014, John Shanley\n * \n * Permission to use, copy, modify, and/or distribute this software for any purpose\n * with or without fee is hereby granted, provided that the above copyright notice\n * and this permission notice appear in all copies.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\n * REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY AND\n * FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\n * INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS\n * OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER\n * TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR PERFORMANCE OF\n * THIS SOFTWARE.\n */\n\nvar blip = {};\n\nblip.version = '0.3.1';\n\n/* AudioContext-MonkeyPatch\n   https://github.com/cwilso/AudioContext-MonkeyPatch\n\n   Copyright 2013 Chris Wilson\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n(function (global, exports, perf) {\n  'use strict';\n\n  function fixSetTarget(param) {\n    if (!param)\t// if NYI, just return\n      return;\n    if (!param.setTargetAtTime)\n      param.setTargetAtTime = param.setTargetValueAtTime;\n  }\n\n  if (window.hasOwnProperty('webkitAudioContext') &&\n      !window.hasOwnProperty('AudioContext')) {\n    window.AudioContext = webkitAudioContext;\n\n    if (!AudioContext.prototype.hasOwnProperty('createGain'))\n      AudioContext.prototype.createGain = AudioContext.prototype.createGainNode;\n    if (!AudioContext.prototype.hasOwnProperty('createDelay'))\n      AudioContext.prototype.createDelay = AudioContext.prototype.createDelayNode;\n    if (!AudioContext.prototype.hasOwnProperty('createScriptProcessor'))\n      AudioContext.prototype.createScriptProcessor = AudioContext.prototype.createJavaScriptNode;\n    if (!AudioContext.prototype.hasOwnProperty('createPeriodicWave'))\n      AudioContext.prototype.createPeriodicWave = AudioContext.prototype.createWaveTable;\n\n\n    AudioContext.prototype.internal_createGain = AudioContext.prototype.createGain;\n    AudioContext.prototype.createGain = function() {\n      var node = this.internal_createGain();\n      fixSetTarget(node.gain);\n      return node;\n    };\n\n    AudioContext.prototype.internal_createDelay = AudioContext.prototype.createDelay;\n    AudioContext.prototype.createDelay = function(maxDelayTime) {\n      var node = maxDelayTime ? this.internal_createDelay(maxDelayTime) : this.internal_createDelay();\n      fixSetTarget(node.delayTime);\n      return node;\n    };\n\n    AudioContext.prototype.internal_createBufferSource = AudioContext.prototype.createBufferSource;\n    AudioContext.prototype.createBufferSource = function() {\n      var node = this.internal_createBufferSource();\n      if (!node.start) {\n        node.start = function ( when, offset, duration ) {\n          if ( offset || duration )\n            this.noteGrainOn( when, offset, duration );\n          else\n            this.noteOn( when );\n        }\n      }\n      if (!node.stop)\n        node.stop = node.noteOff;\n      fixSetTarget(node.playbackRate);\n      return node;\n    };\n\n    AudioContext.prototype.internal_createDynamicsCompressor = AudioContext.prototype.createDynamicsCompressor;\n    AudioContext.prototype.createDynamicsCompressor = function() {\n      var node = this.internal_createDynamicsCompressor();\n      fixSetTarget(node.threshold);\n      fixSetTarget(node.knee);\n      fixSetTarget(node.ratio);\n      fixSetTarget(node.reduction);\n      fixSetTarget(node.attack);\n      fixSetTarget(node.release);\n      return node;\n    };\n\n    AudioContext.prototype.internal_createBiquadFilter = AudioContext.prototype.createBiquadFilter;\n    AudioContext.prototype.createBiquadFilter = function() {\n      var node = this.internal_createBiquadFilter();\n      fixSetTarget(node.frequency);\n      fixSetTarget(node.detune);\n      fixSetTarget(node.Q);\n      fixSetTarget(node.gain);\n      return node;\n    };\n\n    if (AudioContext.prototype.hasOwnProperty( 'createOscillator' )) {\n      AudioContext.prototype.internal_createOscillator = AudioContext.prototype.createOscillator;\n      AudioContext.prototype.createOscillator = function() {\n        var node = this.internal_createOscillator();\n        if (!node.start)\n          node.start = node.noteOn;\n        if (!node.stop)\n          node.stop = node.noteOff;\n        if (!node.setPeriodicWave)\n          node.setPeriodicWave = node.setWaveTable;\n        fixSetTarget(node.frequency);\n        fixSetTarget(node.detune);\n        return node;\n      };\n    }\n  }\n}(window));\n\n/* END AudioContext-MonkeyPatch */\nvar ctx = new AudioContext();\n\n\nfunction now() {\n  return ctx.currentTime;\n}\n\nblip.time = {};\n\nblip.time.now = function() {\n  return now();\n};\n\nblip.time.in = function(t) {\n  return now() + t;\n};\n\nblip.time.seconds = function(t) {\n  return t;\n};\nblip.time.ms = function(t) {\n  return t * 0.001;\n};\nblip.time.samp = function(t) {\n  return t / ctx.sampleRate;\n};\n\nblip.chance = function(p) {\n  var attempt = Math.random();\n  return attempt < p;\n};\n\nblip.random = function(a,b) {\n  switch(arguments.length) {\n    case 0:\n      return Math.random();\n    case 1:\n      return Math.random() * a;\n    case 2:\n      return Math.random() * (b - a) + a;\n  }\n};\n\n/**\n * Generates a GUID string.\n * @returns {String} The generated GUID.\n * @example af8a8416-6e18-a307-bd9c-f2c947bbb3aa\n * @author Slavik Meltser (slavik@meltser.info).\n * @link http://slavik.meltser.info/?p=142\n */\nfunction guid() {\n    function _p8(s) {\n        var p = (Math.random().toString(16)+\"000000000\").substr(2,8);\n        return s ? \"-\" + p.substr(0,4) + \"-\" + p.substr(4,4) : p ;\n    }\n    return _p8() + _p8(true) + _p8(true) + _p8();\n}\n\n// MIDI to Frequency\nblip.mtof = function(midi) {\n  return Math.pow(2, (midi - 69) / 12) * 440;\n};\n\nfunction BlipNodeCollection(nodes) {\n  this.nodes = nodes || [];\n}\n\nBlipNodeCollection.prototype = {\n\n  count: function() {\n    return this.nodes.length;\n  },\n\n  each: function(f) {\n    for (var i = 0; i < this.nodes.length; i++) {\n      f.call(this, this.nodes[i], i, this.nodes);\n    }\n  },\n\n  contains: function(node) {\n    for (var i = 0; i < this.nodes.length; i++) {\n      if (this.nodes[i] === node) return true;\n    }\n    return false;\n  },\n\n  add: function(node) {\n    if (this.nodes.indexOf(node) === -1) this.nodes.push(node);\n  },\n\n  remove: function(node) {\n    var index = this.nodes.indexOf(node);\n    if (index !== -1) this.nodes.splice(index, 1);\n  },\n\n  removeAll: function() {\n    this.nodes = [];\n  }\n\n};\n\n\n// the associated functions will be used by the `createNode` function within `blip.node`\nvar nodeTypes = {\n  'gain': ctx.createGain,\n  'delay': ctx.createDelay,\n  'panner': ctx.createPanner,\n  'convolver': ctx.createConvolver,\n  'analyser': ctx.createAnalyser,\n  'channelSplitter': ctx.createChannelSplitter,\n  'channelMerger': ctx.createChannelMerger,\n  'dynamicsCompressor': ctx.createDynamicsCompressor,\n  'biquadFilter': ctx.createBiquadFilter,\n  'waveShaper': ctx.createWaveShaper,\n  'oscillator': ctx.createOscillator,\n  'periodicWave': ctx.createPeriodicWave,\n  'bufferSource': ctx.createBufferSource,\n  'audioBufferSource': ctx.createBufferSource, // alias\n};\n\nfunction BlipNode() {\n  this.inputs = new BlipNodeCollection();\n  this.outputs = new BlipNodeCollection();\n  return this;\n};\n\nBlipNode.prototype.connect = function(blipnode) {\n  if (this.node().numberOfOutputs > 0 && blipnode.node().numberOfInputs > 0) {\n    this.node().connect(blipnode.node());\n    this.outputs.add(blipnode);\n    blipnode.inputs.add(this);\n  }\n  return this;\n};\n\nBlipNode.prototype.disconnect = function(blipnode) {\n  // disconnect all\n  this.node().disconnect();\n\n  var me = this;\n\n  if (blipnode) {\n    this.outputs.remove(blipnode);\n    blipnode.inputs.remove(this);\n\n    // reconnect to remaining outputs\n    this.outputs.each(function(n) { this.connect(n); })\n  } else {\n    this.outputs.each(function(n) {\n      n.inputs.remove(me);\n    });\n    this.outputs.removeAll();\n  }\n\n  return this;\n}\n\nBlipNode.prototype.prop = function(name, value) {\n  if (arguments.length < 2) {\n    if (typeof name === 'object') {\n      for (var p in name) {\n        this.node()[p] = name[p];\n      }\n      return this;\n    } else {\n      return this.node()[name];\n    }\n  }\n  this.node()[name] = value;\n  return this;\n};\n\nBlipNode.prototype.param = function(name, f) {\n  if (arguments.length < 2) return this.node()[name];\n  if (typeof f !== 'function') {\n    this.node()[name].value = f;\n  } else {\n    f.call(this.node()[name]);\n  }\n  return this;\n};\n\nBlipNode.prototype.start = function(t) {\n  this.node().start.call(this.node(), t);\n};\n\nBlipNode.prototype.stop = function(t) {\n  this.node().stop.call(this.node(), t);\n};\n\nBlipNode.prototype.node = function() {\n  return this.node();\n};\n\nBlipNode.prototype.toString = function() {\n  return '[object BlipNode]';\n};\n\nBlipNode.prototype.valueOf = function() {\n  return this.id();\n};\n\nBlipNode.prototype.call = function(methodName) {\n  var args = Array.prototype.slice.call(arguments, 1);\n  var node = this.node();\n  if (typeof node[methodName] !== 'function') return;\n  node[methodName].apply(node, args);\n};\n\nblip.node = function(type) {\n\n  var other_args = Array.prototype.slice.call(arguments, 1);\n\n  var reference = createNode(type);\n\n  var id = guid();\n\n  var node = new BlipNode();\n\n  function createNode(t) {\n    return nodeTypes[t].apply(ctx, other_args);\n  }\n\n  node.node = function() {\n    return reference;\n  };\n\n  node.id = function() {\n    return id;\n  };\n\n  return node;\n\n}\n\nvar specialBlipNode = function(ref) {\n  var node = new BlipNode();\n  var id = guid();\n  node.node = function() { return ref; };\n  node.id = function() { return id; };\n  return node;\n}\n\n// special nodes\nblip.destination = specialBlipNode(ctx.destination);\nblip.listener = specialBlipNode(ctx.listener);\nblip.chain = function(nodes) {\n\n  nodes = nodes || [];\n\n  wire();\n\n  var chain = {};\n\n  function wire() {\n    for (var i = 0; i < nodes.length-1; i++) {\n      nodes[i].connect(nodes[i+1]);\n    }\n  }\n\n  chain.node = function(blipnode) {\n    nodes.push(blipnode);\n    wire();\n    return chain;\n  };\n  chain.start = function() {\n    var a = nodes.slice(0,1);\n    return a.length ? a[0] : null;\n  };\n  chain.end = function() {\n    var a = nodes.slice(-1);\n    return a.length ? a[0] : null;\n  };\n  chain.from = function(blipnode) {\n    blipnode.connect(chain.start());\n    return chain;\n  };\n  chain.to = function(blipnode) {\n    chain.end().connect(blipnode);\n    return chain;\n  };\n  chain.wire = function() {\n    wire();\n    return chain;\n  }\n\n  return chain;\n}\n\n\n/*\n Precise scheduling for audio events is\n based on the method described in this article by Chris Wilson:\n   http://www.html5rocks.com/en/tutorials/audio/scheduling/\n*/\n\nblip.loop = function() {\n\n  var lookahead = 25.0, // ms\n      scheduleAheadTime = 0.1; // s\n\n  var tempo; // ticks per minute\n\n  var tickInterval; // seconds per tick\n\n  var data = [];\n\n  var currentTick = 0,\n      nextTickTime = 0;\n\n  var tick = function(t, d, i) {};\n  var each = function(t, i) {};\n\n  var iterations = 0,\n      limit = 0;\n\n  var timer;\n\n  function loop() {}\n\n  function nextTick() {\n    nextTickTime += tickInterval;\n\n    // cycle through ticks\n    if (++currentTick >= data.length) {\n      currentTick = 0;\n      iterations += 1;\n    }\n\n  }\n\n  function scheduleTick(tickNum, time) {\n    tick.call(loop, time, data[tickNum], tickNum);\n  }\n\n  function scheduleIteration(iterationNum, time) {\n    each.call(loop, time, iterationNum);\n  }\n\n  function scheduler() {\n    while (nextTickTime < ctx.currentTime + scheduleAheadTime) {\n      scheduleTick(currentTick, nextTickTime);\n      if (currentTick === 0) {\n        scheduleIteration(iterations, nextTickTime);\n      }\n      nextTick();\n      if (limit && iterations >= limit) {\n        loop.reset();\n        return;\n      }\n    }\n    timer = window.setTimeout(scheduler, lookahead);\n  }\n\n  loop.tempo = function(bpm) {\n    if (!arguments.length) return tempo;\n    tempo = bpm;\n    tickInterval = 60 / tempo;\n    return loop;\n  };\n  loop.tickInterval = function(s) {\n    if (!arguments.length) return tickInterval;\n    tickInterval = s;\n    tempo = 60 / tickInterval;\n    return loop;\n  };\n  loop.data = function(a) {\n    if (!arguments.length) return data;\n    data = a;\n    return loop;\n  };\n  loop.lookahead = function(ms) {\n    if (!arguments.length) return lookahead;\n    lookahead = ms;\n    return loop;\n  };\n  loop.scheduleAheadTime = function(s) {\n    if (!arguments.length) return scheduleAheadTime;\n    scheduleAheadTime = s;\n    return loop;\n  };\n  loop.limit = function(n) {\n    if (!arguments.length) return limit;\n    limit = n;\n    return loop;\n  };\n  loop.tick = function(f) {\n    if (!arguments.length) return tick;\n    tick = f;\n    return loop;\n  };\n  loop.each = function(f) {\n    if (!arguments.length) return each;\n    each = f;\n    return loop;\n  }\n  loop.start = function(t) {\n    nextTickTime = t || ctx.currentTime;\n    scheduler();\n    return loop;\n  };\n  loop.stop = function() {\n    window.clearTimeout(timer);\n    return loop;\n  };\n  loop.reset = function() {\n    currentTick = 0;\n    iterations = 0;\n    return loop;\n  };\n\n  return loop;\n\n};\n\n\nvar loadedSamples = {};\n\nblip.sampleLoader = function() {\n\n  var samples = {};\n\n  var each = function() {},\n      done = function() {};\n\n  function loader() {\n    var names = Object.keys(samples);\n    var i = 0;\n    next();\n    function next() {\n      if (i < names.length) {\n        var name = names[i];\n        i++;\n        loadSample(name, samples[name]);\n      } else {\n        done();\n      }\n    }\n    function loadSample(name, url) {\n      var request = new XMLHttpRequest();\n      request.open('GET', url, true);\n      request.responseType = 'arraybuffer';\n      request.addEventListener('load', loaded, false);\n      request.send();\n      function loaded(event) {\n        var req = event.target;\n        var arrayBuffer = req.response;\n        ctx.decodeAudioData(arrayBuffer, decoded);\n      }\n      function decoded(buffer) {\n        loadedSamples[name] = buffer;\n        each(name);\n        next();\n      }\n    }\n  }\n\n  loader.samples = function(o) {\n    if (!arguments.length) return samples;\n    samples = o;\n    return loader;\n  };\n  loader.each = function(f) {\n    if (!arguments.length) return each;\n    each = f;\n    return loader;\n  };\n  loader.done = function(f) {\n    if (!arguments.length) return done;\n    done = f;\n    return loader;\n  };\n  loader.load = function() {\n    return loader();\n  };\n\n  return loader;\n}\n\nblip.clip = function() {\n\n  var sample,\n      rate = 1,\n      gain = 1;\n\n  var chain = null;\n\n  var output_gain = blip.node('gain').connect(blip.destination);\n\n  function clip() {}\n\n  clip.sample = function(name) {\n    if (!arguments.length) return sample;\n    sample = loadedSamples[name];\n    return clip;\n  };\n  clip.rate = function(number) {\n    if (!arguments.length) return rate;\n    rate = number;\n    return clip;\n  };\n  clip.gain = function(number) {\n    if (!arguments.length) return gain;\n    gain = number;\n    output_gain.param('gain', gain);\n    return clip;\n  };\n  clip.chain = function(c) {\n    if (!arguments.length) return chain;\n    chain = c;\n    output_gain.disconnect(blip.destination);\n    chain.from(output_gain).to(blip.destination);\n    return clip;\n  };\n  clip.play = function(time, params) {\n    time = time || 0;\n    var source = ctx.createBufferSource();\n    source.buffer = sample;\n\n    if (params) {\n      if (typeof params.gain !== 'undefined') {\n        if (typeof params.gain === 'function') {\n          output_gain.param('gain', params.gain)\n        } else {\n          output_gain.param('gain', function() {\n            this.setValueAtTime(params.gain, time)\n          })\n        }\n      } else {\n        output_gain.param('gain', params.gain);\n      }\n      if (typeof params.rate !== 'undefined') {\n        if (typeof params.rate === 'function') {\n          BlipNode.prototype.param.call(specialBlipNode(source), 'playbackRate', params.rate)\n        } else {\n          source.playbackRate.setValueAtTime(params.rate, time)\n        }\n      } else {\n        BlipNode.prototype.param.call(specialBlipNode(source), 'playbackRate', rate);\n      }\n    } else {\n      if (gain !== 1) output_gain.param('gain', gain);\n      if (rate !== 1) BlipNode.prototype.param.call(specialBlipNode(source), 'playbackRate', rate);\n    }\n\n    source.connect(output_gain.node());\n    source.start(time);\n  };\n\n  return clip;\n}\n\n\nblip.envelope = function() {\n\n  var attack = 0,\n      decay = 0,\n      sustain = 0.8,\n      release = 0;\n\n  var gain = ctx.createGain();\n\n  // wrap the GainNode, giving it BlipNode methods\n  var envelope = specialBlipNode(gain);\n\n  // initialize the gain at 0\n  envelope.param('gain', 0);\n\n  // ADSR setter/getters\n  envelope.attack = function(a) {\n    if (!arguments.length) return attack;\n    attack = a;\n    return envelope;\n  };\n  envelope.decay = function(d) {\n    if (!arguments.length) return decay;\n    decay = d;\n    return envelope;\n  };\n  envelope.sustain = function(s) {\n    if (!arguments.length) return sustain;\n    sustain = s;\n    return envelope;\n  };\n  envelope.release = function(r) {\n    if (!arguments.length) return release;\n    release = r;\n    return envelope;\n  };\n  envelope.noteOn = function(t) {\n    t = typeof t === 'number' ? t : now();\n    envelope.param('gain', function() {\n      this.cancelScheduledValues(t);\n      this.setValueAtTime(0, t);\n      this.linearRampToValueAtTime(1, t + attack);\n      this.setTargetAtTime(sustain, t + attack, decay * 0.368);\n      this.setValueAtTime(sustain, t + attack + decay);\n    });\n    return envelope;\n  };\n  envelope.noteOff = function(t) {\n    t = typeof t === 'number' ? t : now();\n    envelope.param('gain', function() {\n      this.cancelScheduledValues(t);\n      //this.setValueAtTime(sustain, t);\n      this.setTargetAtTime(0, t, release * 0.368)\n      this.setValueAtTime(0, t + release);\n    });\n    return envelope;\n  };\n  envelope.play = function(t, dur) {\n    envelope.noteOn(t);\n    envelope.noteOff(t + dur);\n    return envelope;\n  };\n\n  return envelope;\n}\n\nblip.getContext = function() { return ctx; };\nblip.getLoadedSamples = function() { return loadedSamples; };\nblip.sample = function(name) {\n  return loadedSamples[name];\n}\n\nwindow.blip = blip\n"]}