{"version":3,"sources":["src/app.js"],"names":[],"mappings":"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","file":"src/app.js","sourcesContent":["/**\n\nThis is code for a hackathon.\n\nIt is full of hacks.\n\nForgive me.\n\n<3 Andy\n\n**/\n\nclass Jukebox {\n    static postClipLength() {\n        return 3.583;\n    }\n\n    static postTimings() {\n        return [\n            0,\n            0.667,\n            0.883,\n            1.290,\n            1.718,\n            2.004,\n            2.140,\n            2.403,\n            2.601\n        ]\n    }\n\n    constructor() {\n        const soundsPath = \"sound/\";\n        const soundsExtension = \".mp3\";\n        const samples = {};\n\n        this.powerLineSampleNames = [];\n        for (let powerLineIndex = 0; powerLineIndex < 3; powerLineIndex++) {\n            const sampleName = `lines${powerLineIndex + 1}`;\n            this.powerLineSampleNames.push(sampleName);\n            samples[sampleName] = `${soundsPath}${sampleName}${soundsExtension}`;\n        }\n\n        this.postSampleNames = [];\n        for (let postIndex = 0; postIndex < 9; postIndex++) {\n            const sampleName = `posts${postIndex + 1}`;\n            this.postSampleNames.push(sampleName);\n            samples[sampleName] = `${soundsPath}${sampleName}${soundsExtension}`;\n        }\n\n        blip.sampleLoader()\n            .samples(samples)\n            .done(() => {\n                this.done = true;\n                this.loop = blip.loop();\n                this.loop\n                    .tickInterval(Jukebox.postClipLength())\n                    .each((time, iteration) => {\n                        this.postSounds = this.postSampleNames.map((sampleName) => {\n                            return blip.clip().sample(sampleName);\n                        });\n                        this.powerLineSounds = this.powerLineSampleNames.map((sampleName) => {\n                            return blip.clip().sample(sampleName);\n                        });\n\n                        this.loopTime = time;\n                        this.update(true);\n\n                        for (let postEntry of this.postSounds.entries()) {\n                            postEntry[1].play(time + Jukebox.postTimings()[postEntry[0]]);\n                        }\n                        for (let powerLineEntry of this.powerLineSounds.entries()) {\n                            powerLineEntry[1].play(time + (powerLineEntry[0] > 0 ? Jukebox.postClipLength() : 0));\n                        }\n                    });\n                this.looping = false;\n            })\n            .load();\n    }\n\n    update(fromLoop) {\n        let shouldLoop = false;\n        const posts = (onesPosts.length > 0) ? onesPosts : combinedPosts;\n        for (var i = 0; i < posts.length; i++) {\n            let hasSingingBird = (posts[i].bird !== null) && posts[i].bird.singing;\n            shouldLoop = (shouldLoop || hasSingingBird);\n        }\n\n        let basePowerLineIndex = null;\n        switch (currentStage) {\n            case \"transition-to-combined\":\n            case \"tens\":\n                basePowerLineIndex = 0;\n                break;\n            case \"combined\":\n            case \"complete\":\n                basePowerLineIndex = 3;\n                break;\n        }\n\n        let numberOfPhrases = 1;\n        for (var powerLineIndex = 0; powerLineIndex < 3; powerLineIndex++) {\n            if (basePowerLineIndex !== null) {\n                const powerLine = powerLines[basePowerLineIndex + powerLineIndex];\n                let shouldSing = powerLine.birds.length === 10 && powerLine.birds[0].singing;\n                if (shouldSing) {\n                    numberOfPhrases = 2;\n                }\n                shouldLoop = (shouldLoop || shouldSing);\n            }\n        }\n        this.loop.tickInterval(Jukebox.postClipLength() * numberOfPhrases);\n\n        const oldLooping = this.looping;\n        this.looping = shouldLoop;\n        if (oldLooping && !shouldLoop) {\n            this.loop.stop();\n            return;\n        } else if (!oldLooping && shouldLoop && fromLoop !== true) {\n            this.loop.start();\n            return;\n        }\n\n        const maxGain = 0.5;\n\n        for (let postEntry of this.postSounds.entries()) {\n            const postIndex = postEntry[0];\n            if (posts.length > 0) {\n                let hasSingingBird = (posts[postIndex].bird !== null) && posts[postIndex].bird.singing;\n                postEntry[1].gain(hasSingingBird ? maxGain : 0);\n            } else {\n                postEntry[1].gain(0);\n            }\n        }\n\n        for (var powerLineIndex = 0; powerLineIndex < 3; powerLineIndex++) {\n            let shouldSing = 0;\n            if (basePowerLineIndex !== null) {\n                const powerLine = powerLines[basePowerLineIndex + powerLineIndex];\n                shouldSing = powerLine.birds.length === 10 && powerLine.birds[0].singing;\n            }\n            this.powerLineSounds[powerLineIndex].gain(shouldSing ? maxGain : 0);\n        }\n    }\n}\n\nlet jukebox = new Jukebox();\n\nconst canvas = {\n    width: 1366,\n    height: 3400,\n};\nconst rootContainer = document.getElementById(\"bird-academy-container\");\n\nfunction loadImage(name) {\n    const image = new Image();\n    image.src = \"img/\" + name + \".png\";\n    return image;\n}\n\nconst mamaCloud = document.getElementById(\"mama-cloud\");\nmamaCloud.currentX = 100;\n\nconst weeCloud = document.getElementById(\"wee-cloud\");\nweeCloud.currentX = 400;\n\nconst firstFencePostOriginX = 6;\nconst fencePostSpacing = 6;\nconst onesFencePostY = 725;\nconst combinedFencePostY = 2570;\n\nconst skySpacing = 120;\nconst onesSkySlotsY = 290;\nconst tensSkySlotsY = 1566;\nconst combinedSkySlotsY = 2415;\nlet skySlotsY = onesSkySlotsY;\n\nconst skySpots = [];\nfor (let skySpotsIndex = 0; skySpotsIndex < 50; skySpotsIndex++) {\n    skySpots.push(false);\n}\n\nlet suppressNextBirdSequence = false;\n\nclass Counter {\n    constructor(y, actionString) {\n        this.canvas = document.createElement(\"canvas\");\n        this.canvas.width = 350;\n        this.canvas.height = 100;\n        this.canvas.style.position = \"absolute\";\n        setTransform(this.canvas, \"translateZ(0)\");\n        rootContainer.appendChild(this.canvas);\n        this.context = this.canvas.getContext(\"2d\");\n\n        const counterX = 1080;\n        this.currentX = counterX;\n        this.currentY = y;\n        this.targetX = counterX;\n        this.targetY = y;\n        this.height = 70;\n        this.opacity = 1.0;\n        this.actionString = actionString;\n        this.enabled = true;\n        this.scale = 1.0;\n        this.needsDisplay = true;\n    }\n\n    setValue(newValue) {\n        if (this.value !== undefined && this.value !== newValue) {\n            this.scale = 1.5;\n        }\n        this.value = newValue;\n\n        const ctx = this.context;\n        ctx.save();\n        ctx.font = Counter.numberFont();\n        this.textMetrics = ctx.measureText(newValue);\n        ctx.restore();\n\n        const birdString = this.value === 1 ? \"bird\" : \"birds\";\n        this.descriptionString = birdString + \" \" + this.actionString;\n\n        this.width = newValue >= 10 ? 91 : 55;\n    }\n\n    static numberFont() {\n        return \"100 60px 'Proxima Nova'\";\n    }\n\n    static counterPadding() {\n        return 13;\n    }\n\n    update() {\n        const opacitySpeed = 0.4;\n        const targetOpacity = this.enabled ? 1.0 : 0.0;\n\n        const oldOpacity = this.opacity;\n        this.opacity = this.opacity * (1.0 - opacitySpeed) + targetOpacity * opacitySpeed;\n        if (Math.abs(this.opacity - oldOpacity) > 0.001) {\n            this.canvas.style.opacity = this.opacity;\n        }\n\n        const positionSpeed = 0.06;\n        this.currentX = this.currentX * (1.0 - positionSpeed) + this.targetX * positionSpeed;\n        this.currentY = this.currentY * (1.0 - positionSpeed) + this.targetY * positionSpeed;\n\n        this.x = this.currentX;\n        this.y = this.currentY;\n\n        const oldScale = this.scale;\n        this.scale = this.scale * 0.85 + 1.0 * 0.15;\n\n        const epsilon = 0.001;\n        if (Math.abs(this.scale - oldScale) > epsilon) {\n            this.needsDisplay = true;\n        }\n    }\n\n    draw() {\n        const frameX = Math.floor(this.x - this.width - Counter.counterPadding()); + \"px\";\n        const frameY = Math.floor(this.y - this.height / 2.0); + \"px\";\n        setTransform(this.canvas, \"translate3D(\" + frameX + \"px, \" + frameY + \"px, 0px)\");\n\n        if (this.needsDisplay) {\n            const ctx = this.context;\n            ctx.clearRect(0, 0, this.canvas.width, this.canvas.height);\n\n            const cornerRadius = 5;\n\n            const originX = 20;\n            const originY = 20;\n\n            // Make a round rect...\n            ctx.save();\n            ctx.beginPath();\n\n            const counterCenterX = originX + this.width / 2.0;\n            const counterCenterY = originY + this.height / 2.0;\n\n            ctx.translate(counterCenterX, counterCenterY);\n            ctx.scale(this.scale, this.scale);\n            ctx.translate(-counterCenterX, -counterCenterY);\n            ctx.moveTo(originX + cornerRadius, originY);\n            ctx.lineTo(originX + this.width - cornerRadius, originY);\n            ctx.arcTo(originX + this.width, originY, originX + this.width, originY + cornerRadius, cornerRadius);\n            ctx.lineTo(originX + this.width, originY + this.height - cornerRadius);\n            ctx.arcTo(originX + this.width, originY + this.height, originX + this.width - cornerRadius, originY + this.height, cornerRadius);\n            ctx.lineTo(originX + cornerRadius, originY + this.height);\n            ctx.arcTo(originX, originY + this.height, originX, originY + this.height - cornerRadius, cornerRadius);\n            ctx.lineTo(originX, originY + cornerRadius);\n            ctx.arcTo(originX, originY, originX + cornerRadius, originY, cornerRadius);\n\n            ctx.save();\n            ctx.globalCompositeOperation = \"multiply\";\n            ctx.shadowColor = \"rgba(0, 0, 0, 0.1)\";\n            ctx.shadowBlur = 30;\n            ctx.fillStyle = \"rgba(62, 62, 62, 0.25)\";\n            ctx.fill();\n            ctx.restore();\n\n            ctx.font = Counter.numberFont();\n            ctx.fillStyle = \"#ffc000\";\n\n            const ones = this.value % 10;\n            const onesMeasure = ctx.measureText(ones);\n            ctx.fillText(this.value % 10, originX + this.width - onesMeasure.width - 9, originY + this.height - Counter.counterPadding());\n            if (this.value >= 10) {\n                const tens = Math.floor(this.value / 10);\n                ctx.fillStyle = \"#ff9c00\";\n                const tensMeasure = ctx.measureText(tens)\n                ctx.fillText(tens, originX + this.width - 44 - tensMeasure.width, originY + this.height - Counter.counterPadding());\n            }\n            ctx.restore();\n\n            ctx.save();\n            ctx.fillStyle = \"white\";\n            ctx.font = \"100 44px 'Proxima Nova'\";\n            ctx.fillText(this.descriptionString, originX + this.width + 10, originY + this.height - 14);\n\n            this.needsDisplay = false;\n        }\n    }\n}\n\nclass BirdsFlyingCounter extends Counter {\n    constructor(y) {\n        super(y, \"flying\");\n        this.floatOffsetX = 0;\n        this.floatOffsetY = 0;\n    }\n\n    update() {\n        super.update();\n\n        this.floatOffsetX += Math.sin(Date.now() / 3000) * 0.1;\n        this.floatOffsetY += Math.sin(Date.now() / 1800) * 0.3;\n\n        const scrollingOffset = (currentStage === \"ones\") ? 0 : Math.max(0, window.scrollY - this.targetY + 150);\n\n        this.x = this.currentX + this.floatOffsetX;\n        this.y = this.currentY + scrollingOffset + this.floatOffsetY;\n    }\n\n    draw() {\n        super.draw();\n    }\n}\n\nclass TotalCounter extends Counter {\n    constructor(y) {\n        super(y, \"total\");\n        const line = document.createElement(\"div\");\n        line.style.backgroundColor = \"white\";\n        line.style.height = \"3px\";\n        line.style.width = `${330}px`;\n        line.style.position = \"absolute\";\n        line.style.top = `${y - 50}px`;\n        line.style.left = `${this.currentX - 80}px`;\n        this.canvas.parentNode.appendChild(line);\n        this.line = line;\n        this.lastY = this.y;\n    }\n\n    update() {\n        super.update();\n        if (this.y !== this.lastY) {\n            this.lastY = this.y;\n            this.line.style.top = `${this.y - 50}px`;\n        }\n        // this.y = window.scrollY + window.innerHeight - 100;\n    }\n\n    draw() {\n        super.draw();\n        /* TODO (reimplement)\n        ctx.save();\n        ctx.beginPath();\n        ctx.moveTo(this.x - this.width/2.0 - 80, this.y - this.height/2.0 - 30);\n        ctx.lineTo(this.x + 220, this.y - this.height/2.0 - 30);\n        ctx.lineWidth = 3;\n        ctx.lineCapStyle = \"round\";\n        ctx.strokeStyle = \"white\";\n        ctx.stroke();\n        ctx.restore();\n*/\n    }\n}\n\n\nfunction updateCounterValues() {\n    birdsFlyingCounter.setValue(birds.filter((bird) => {\n        return bird.flying && bird.active;\n    }).length);\n    onesFencePostCounter.setValue(onesPosts.filter((post) => {\n        return post.bird !== null;\n    }).length);\n    combinedFencePostCounter.setValue(combinedPosts.filter((post) => {\n        return post.bird !== null;\n    }).length);\n    totalCounter.setValue(birds.filter((bird) => {\n        return bird.active;\n    }).length);\n}\n\nconst birdsFlyingCounter = new BirdsFlyingCounter(skySlotsY);\nconst onesFencePostCounter = new Counter(678, \"sitting\");\nconst combinedFencePostCounter = new Counter(2560, \"sitting\");\ncombinedFencePostCounter.enabled = false;\nconst totalCounter = new TotalCounter(810);\n\nlet numberOfBirdsSinging = 0;\nconst birdContainer = document.getElementById(\"bird-container\");\nconst numberOfBirdFrames = 10;\nclass Bird {\n    constructor(x, y) {\n        this.element = document.createElement(\"div\");\n        this.element.style.position = \"absolute\";\n        this.element.style.width = \"143px\";\n        this.element.style.height = \"140px\";\n        this.element.style.backgroundImage = \"url(img/peep.png)\";\n        setTransform(this.element, \"translate(-500px, -500px)\");\n\n        birdContainer.appendChild(this.element);\n\n        this.x = x;\n        this.y = y;\n        this.targetX = this.x;\n        this.targetY = this.y;\n        this.floatOffsetX = 0;\n        this.floatOffsetY = 0;\n        this.flying = true;\n        this.active = true;\n        this.phase = Math.random() % (2 * Math.PI);\n        this.frequencyX = 800 + Math.random() % 200;\n        this.frequencyY = 600 + Math.random() % 150;\n        this.floatOffsetAmplitudeX = 50;\n        this.floatOffsetAmplitudeY = 30;\n        this.flyingAngleAmplitude = Math.PI / 7.0;\n        this.sittingAngleAmplitude = Math.PI / 25.0;\n        this.animationIndex = Math.floor(Math.random() * numberOfBirdFrames);\n        this.positionIndex = null;\n        this.post = null;\n        this.powerLine = null;\n        this.canSing = true;\n    }\n\n    static width() {\n        return 143;\n    }\n\n    static height() {\n        return 140;\n    }\n\n    update() {\n        const speed = 0.1;\n        const floatOffsetX = this.flying ? Math.sin(Date.now() / this.frequencyX + this.phase) * this.floatOffsetAmplitudeX : 0.0;\n        const floatOffsetY = this.flying ? Math.sin(Date.now() / this.frequencyY + this.phase) * this.floatOffsetAmplitudeY : 0.0;\n        const targetX = this.targetX + floatOffsetX;\n        const targetY = this.targetY + floatOffsetY;\n        this.x = this.x * (1.0 - speed) + targetX * speed;\n        this.y = this.y * (1.0 - speed) + targetY * speed;\n        const originX = this.x - Bird.width() / 2.0;\n        const originY = this.y - Bird.height() / 2.0;\n\n        const bobbingAmplitude = this.flying ? this.flyingAngleAmplitude : this.sittingAngleAmplitude;\n        this.angle = -Math.sin(Date.now() / this.frequencyX + this.phase) * bobbingAmplitude;\n\n        const oldSinging = this.singing;\n        this.singing = !this.flying && Math.abs(this.x - this.targetX) < 0.1 && Math.abs(this.y - this.targetY) < 0.1 && this.active;\n        if (oldSinging != this.singing) {\n            jukebox.update();\n        }\n\n        if (this.active) {\n            let index;\n            if (this.singing) {\n                index = 0;\n            } else {\n                index = 1 + this.animationIndex;\n            }\n            this.element.style.backgroundPosition = index * Bird.width() + \"px 0px\";\n\n            this.animationIndex = (this.animationIndex + 1) % numberOfBirdFrames;\n\n            if (rectContainsMouse(this.x - Bird.width() / 4.0, this.y - Bird.height() / 4.0, Bird.width() / 2.0, Bird.height() / 2.0) && (Mouse.target === undefined || Mouse.target === this)) {\n                if (Mouse.pressed) {\n                    Mouse.target = this;\n                }\n\n                cursor = \"pointer\";\n\n                if (!Mouse.pressed && this.pressed && Mouse.target === this) {\n                    Mouse.target = undefined;\n\n                    if (this.flying) {\n                        for (var post of onesPosts.concat(combinedPosts)) {\n                            if (post.bird === null) {\n                                post.landBirdHere(this);\n                                break;\n                            }\n                        }\n\n                        if (this.flying) {\n                            for (var powerLine of powerLines) {\n                                if (powerLine.birds.length === 0) {\n                                    powerLine.landBirdsHere([this]);\n                                    break;\n                                }\n                            }\n                        }\n                    } else {\n                        if (this.post != null) {\n                            this.flyAway();\n                        } else if (this.powerLine != null) {\n                            for (let flyingBird of this.powerLine.birds) {\n                                flyingBird.flyAway();\n                            }\n                            this.powerLine.birds = [];\n                            this.powerLine = null;\n                        }\n                    }\n                }\n                this.pressed = Mouse.pressed;\n            }\n        }\n\n        setTransform(this.element, \"translateZ(0) translate(\" + originX + \"px, \" + originY + \"px) rotate(\" + this.angle + \"rad)\");\n    }\n\n    landAt(x, y) {\n        this.targetX = x;\n        this.targetY = y;\n        this.flying = false;\n        skySpots[this.positionIndex] = false;\n        this.positionIndex = null;\n    }\n\n    flyAway() {\n        let skySpotIndex = (this.positionIndex !== null) ? this.positionIndex : skySpots.findIndex((el) => {\n            return el === false;\n        });\n\n        const rightMargin = ((currentStage === \"transition-to-combined\") || (currentStage === \"combined\")) ? 200 : 500;\n        this.targetX = 100 + (skySpotIndex * skySpacing) % (canvas.width - rightMargin);\n        this.targetY = skySlotsY + skySpacing * Math.floor((skySpotIndex * skySpacing) / (canvas.width - rightMargin));\n        this.flying = true;\n        this.positionIndex = skySpotIndex;\n\n        skySpots[skySpotIndex] = true;\n\n        if (this.post !== null) {\n            this.post.bird = null;\n            this.post = null;\n        }\n    }\n}\n\nclass Post {\n    constructor(fenceElement, originX, originY) {\n        const range = document.createRange();\n        range.setStartAfter(fenceElement);\n        const image = document.createElement(\"img\");\n        image.src = \"img/fence-highlight.png\";\n        image.style.position = \"absolute\";\n        image.style.left = originX + \"px\";\n        image.style.top = originY + \"px\";\n        image.style.opacity = 0;\n        range.insertNode(image);\n\n        this.image = image;\n\n        this.originX = originX;\n        this.originY = originY;\n        this.bird = null;\n    }\n\n    static width() {\n        return 70;\n    }\n\n    static height() {\n        return 182;\n    }\n\n    update() {\n        let highlight = rectContainsMouse(this.originX, this.originY, Post.width(), Post.height());\n        if (!this.lastPressed && Mouse.pressed) {\n            for (var bird of birds) {\n                // Very very hacky z-ordering of hit testing.\n                if (rectContainsMouse(bird.x - Bird.width() / 4.0, bird.y - Bird.height() / 4.0, Bird.width() / 2.0, Bird.height() / 2.0)) {\n                    highlight = false;\n                    break;\n                }\n            }\n        }\n\n        if (highlight) {\n            cursor = \"pointer\";\n        }\n\n        if (Mouse.pressed && ((highlight && (Mouse.target === undefined)) || Mouse.target === this)) {\n            this.pressed = highlight;\n            Mouse.target = this.pressed ? this : undefined;\n        } else if (this.pressed && !Mouse.pressed && Mouse.target === this) {\n            if (this.bird !== null) {\n                this.bird.flyAway();\n            } else {\n                // Find a flying bird; make it fly here.\n                for (var bird of birds) {\n                    if (bird.flying && bird.active) {\n                        this.landBirdHere(bird);\n                        break;\n                    }\n                }\n\n                this.prompt = false;\n            }\n\n            this.pressed = false;\n            Mouse.target = undefined;\n        }\n        this.lastPressed = Mouse.pressed;\n\n        let highlightAlpha = 0.0;\n        if (this.pressed) {\n            highlightAlpha = 1.0;\n        } else if (this.prompt) {\n            highlightAlpha = (Math.sin(Date.now() / 190) + 1.0) / 2.0;\n        }\n        this.image.style.opacity = highlightAlpha * 0.5;\n    }\n\n    landBirdHere(bird) {\n        this.bird = bird;\n        bird.landAt(this.originX + Post.width() / 2.0, this.originY - 15);\n        bird.post = this;\n    }\n}\n\nclass Wave {\n    constructor(waveElement) {\n        this.waveElement = waveElement;\n        this.frequency = 1000 + (Math.random() % 1000);\n        this.amplitudeX = 25;\n        this.amplitudeY = 10;\n    }\n\n    update() {\n        setTransform(this.waveElement, \"translate(\" + Math.sin(Date.now() / this.frequency) * this.amplitudeX + \"px, \" + Math.cos(Date.now() / this.frequency) * this.amplitudeY + \"px)\");\n    }\n}\n\nclass ScrollDownArrow {\n    static centerX() {\n        return canvas.width / 2.0;\n    }\n\n    constructor(y) {\n        this.element = document.getElementById(\"scroll-down\");\n        this.height = this.element.height;\n\n        this.anchorY = y;\n        this.enabled = false;\n        this.alpha = 0;\n        this.targetAlpha = 0;\n\n        this.targetScale = 1.0;\n        this.scale = 1.0;\n    }\n\n    update() {\n        this.x = ScrollDownArrow.centerX();\n        this.y = this.anchorY + Math.sin(Date.now() / 1000) * 25;\n\n        const targetAlpha = this.enabled ? 1.0 : 0.0;\n        const alphaSpeed = 0.2;\n        this.targetAlpha = this.targetAlpha * (1.0 - alphaSpeed) + targetAlpha * alphaSpeed;\n        let newAlpha = this.targetAlpha * (1.0 - Math.min(1.0, Math.max(0.0, (window.scrollY - (this.anchorY - this.height)) / 100.0)));\n\n        let newTransform;\n        if (newAlpha > 0 || (this.alpha !== 0 && newAlpha === 0)) {\n            this.alpha = newAlpha;\n            newTransform = \"translate(\" + this.x + \"px, \" + this.y + \"px)\";\n            this.element.style.opacity = this.alpha;\n        }\n\n        const highlight = rectContainsMouse(this.x, this.y, this.element.width, this.element.height);\n        const highlightedScale = 1.15;\n        this.targetScale = (highlight && !Mouse.pressed) ? highlightedScale : 1.0;\n        const newScale = this.scale * 0.85 + this.targetScale * 0.15;\n        newTransform += \" scale(\" + this.scale + \")\";\n        this.scale = (Math.abs(newScale - 1.0) < 0.01) ? 1.0 : newScale;\n\n        if (highlight && this.enabled) {\n            cursor = \"pointer\";\n            if (this.pressed && !Mouse.pressed) {\n                window.scrollTo(0, this.y + 250);\n            }\n            this.pressed = Mouse.pressed;\n        }\n\n        if (this.oldTransform !== newTransform) {\n            setTransform(this.element, newTransform);\n            this.oldTransform = newTransform;\n        }\n    }\n}\n\nclass PowerLine {\n    static highlightImage() {\n        if (this._highlightImage === undefined) {\n            this._highlightImage = loadImage(\"power-line-brightener\");\n        }\n        return this._highlightImage;\n    }\n\n    static missingBirdImage() {\n        if (this._missingBirdImage === undefined) {\n            this._missingBirdImage = loadImage(\"bird-outline-prompt\");\n        }\n        return this._missingBirdImage;\n    }\n\n    constructor(centerX, centerY, radius, firstDotX, firstDotY, secondDotX, secondDotY, beamX, beamY, otherPowerLinesToCount) {\n        this.missingBirdElements = [];\n        for (var missingBirdIndex = 0; missingBirdIndex < 10; missingBirdIndex++) {\n            const missingBirdImage = document.createElement(\"img\");\n            missingBirdImage.src = PowerLine.missingBirdImage().src;\n            missingBirdImage.style.position = \"absolute\";\n            missingBirdImage.style.display = \"hidden\";\n            missingBirdImage.hidden = true;\n            birdContainer.appendChild(missingBirdImage);\n            this.missingBirdElements.push(missingBirdImage);\n        }\n\n        this.highlightImage = document.createElement(\"img\");\n        this.highlightImage.src = PowerLine.highlightImage().src;\n        this.highlightImage.style.position = \"absolute\";\n        this.highlightImage.style.left = beamX + \"px\";\n        this.highlightImage.style.top = beamY + \"px\";\n        this.highlightImage.style.opacity = 0;\n        this.highlightImage.oldAlpha = 0;\n        rootContainer.appendChild(this.highlightImage);\n\n        this.centerX = centerX;\n        this.centerY = centerY;\n        this.radius = radius;\n\n        // In math, unlike in drawing, +y is up.\n        const firstDotAngle = Math.atan2(this.centerY - firstDotY, firstDotX - this.centerX);\n        const secondDotAngle = Math.atan2(this.centerY - secondDotY, secondDotX - this.centerX);\n        const dotSpacingAngle = secondDotAngle - firstDotAngle;\n\n        this.dotPoints = new Array(10);\n        for (let dotIndex = 0; dotIndex < 10; dotIndex++) {\n            // The dots aren't actually spaced in even arc lengths along X. They're on the edge of a circle but spaced in even X amounts.\n            const dotX = firstDotX + (secondDotX - firstDotX) * dotIndex;\n            const dotY = this.centerY - this.radius * Math.sin(firstDotAngle + dotIndex * dotSpacingAngle);\n            this.dotPoints[dotIndex] = [dotX, dotY];\n        }\n\n        this.beamX = beamX;\n        this.beamY = beamY;\n\n        this.birds = [];\n\n        this.debugDrawing = false;\n\n        if (otherPowerLinesToCount !== undefined) {\n            this.counter = new Counter(beamY + 110, \"sitting\");\n            this.otherPowerLinesToCount = otherPowerLinesToCount;\n        } else {\n            this.counter = null;\n        }\n        this.setEnabled(true);\n    }\n\n    update() {\n        if (this.counter !== null) {\n            let total = this.birds.length;\n            for (let otherPowerLine of this.otherPowerLinesToCount) {\n                total += otherPowerLine.birds.length;\n            }\n            this.counter.setValue(total);\n            this.counter.update();\n        }\n        if (!this.enabled) {\n            return;\n        }\n\n        const highlight = rectContainsMouse(this.beamX, this.beamY, PowerLine.highlightImage().width, PowerLine.highlightImage().height);\n        if (highlight) {\n            cursor = \"pointer\";\n        }\n        if (Mouse.pressed) {\n            this.pressed = highlight;\n        } else if (this.pressed && !Mouse.pressed) {\n            if (this.birds.length === 0) {\n                this.landBirdsHere(birds);\n                this.prompt = false;\n            } else {\n                for (const flyingBird of this.birds) {\n                    flyingBird.flyAway();\n                }\n                this.birds = [];\n            }\n\n            this.pressed = false;\n        }\n\n        for (var birdIndex = 0; birdIndex < 10; birdIndex++) {\n            const missingBirdElement = this.missingBirdElements[birdIndex];\n\n            if (birdIndex >= this.birds.length && this.birds.length > 0 && this.birds.length < 10) {\n                missingBirdElement.style.opacity = (Math.sin((Date.now() - this.landingTime) / 150) + 1.0) / 2.0;\n                setTransform(missingBirdElement, \"translate3D(\" + (this.dotPoints[birdIndex][0] - missingBirdElement.width / 2.0) + \"px, \" + (this.dotPoints[birdIndex][1] - 18 - missingBirdElement.height / 2.0) + \"px, 0px)\");\n                if (missingBirdElement.hidden === true) {\n                    missingBirdElement.style.display = \"initial\";\n                    missingBirdElement.hidden = false;\n                }\n            } else {\n                if (missingBirdElement.hidden === false) {\n                    missingBirdElement.style.display = \"none\";\n                    missingBirdElement.hidden = true;\n                }\n            }\n        }\n\n        const oldHighlightAlpha = this.highlightImage.oldAlpha;\n        let highlightAlpha = 0.0;\n        if (this.pressed) {\n            highlightAlpha = 1.0;\n        } else if (this.prompt) {\n            highlightAlpha = (Math.sin(Date.now() / 190) + 1.0) / 2.0;\n        }\n\n        if (Math.abs(highlightAlpha - oldHighlightAlpha)) {\n            this.highlightImage.style.opacity = highlightAlpha * 0.5;\n            this.highlightImage.oldAlpha = highlightAlpha;\n        }\n    }\n\n    landBirdsHere(landingBirds) {\n        for (var birdIndex = 0; birdIndex < landingBirds.length && this.birds.length < 10; birdIndex++) {\n            const bird = landingBirds[birdIndex];\n            if (bird.flying && bird.active) {\n                const dotPoint = this.dotPoints[this.birds.length];\n                bird.landAt(dotPoint[0], dotPoint[1] - 15);\n                bird.powerLine = this;\n                this.birds.push(bird);\n            }\n        }\n        this.landingTime = Date.now();\n\n        if (this.birds.length < 10) {\n            suppressNextBirdSequence = true;\n            setTimeout(() => {\n                suppressNextBirdSequence = false;\n                for (var bird of this.birds) {\n                    bird.flyAway();\n                }\n                this.birds = [];\n            }, 1600);\n        }\n    }\n\n    draw() {\n        if (this.counter !== null) {\n            this.counter.draw();\n        }\n    }\n\n    setEnabled(newValue) {\n        this.enabled = newValue;\n        if (this.counter !== null) {\n            this.counter.enabled = newValue;\n        }\n    }\n}\n\nclass PlayAgain {\n    constructor() {\n        this.element = document.getElementById(\"play-again\");\n        this.youDidIt = document.getElementById(\"you-did-it\");\n        this.active = false;\n        this.y = 3600;\n\n        const makeBird = function(parentNode) {\n            const bird = new Bird(0, 0);\n            parentNode.appendChild(bird.element);\n            bird.flying = true;\n            bird.flyingAngleAmplitude /= 6.0;\n            bird.floatOffsetAmplitudeX /= 1.6;\n            bird.floatOffsetAmplitudeY /= 1.6;\n            return bird;\n        };\n        this.carryingBird1 = makeBird(this.element);\n        this.carryingBird2 = makeBird(this.element);\n        this.unhelpfulBird1 = makeBird(this.element);\n        this.unhelpfulBird2 = makeBird(this.element);\n\n        this.sittingBirds = [];\n        for (var sittingBirdIndex = 0; sittingBirdIndex < 3; sittingBirdIndex++) {\n            const sittingBird = makeBird(this.element);\n            sittingBird.flying = false;\n            sittingBird.canSing = false;\n            this.sittingBirds.push(sittingBird);\n        }\n\n        document.getElementById(\"play-again-link\").onclick = (event) => {\n            this.playAgain();\n            event.preventDefault();\n            event.stopPropagation();\n        };\n\n        this.hue = 0;\n\n        this.blackout = document.getElementById(\"blackout\");\n        this.lastBlackoutAlpha = 0;\n    }\n\n    set active(newValue) {\n        if (newValue) {\n            this.element.style.display = \"block\";\n            this.blackout.style.display = \"block\";\n        }\n        Mouse.enabled = !newValue;\n\n        this._active = newValue;\n    }\n\n    get active() {\n        return this._active;\n    }\n\n    playAgain() {\n        this.active = false;\n\n        for (const flyingBird of birds) {\n            if (flyingBird.active) {\n                flyingBird.flyAway();\n                flyingBird.targetY = 3600;\n                flyingBird.active = false;\n            }\n        }\n\n        for (const powerLine of powerLines) {\n            powerLine.birds = [];\n        }\n\n        setTimeout(() => {\n            for (const flyingBird of birds) {\n                flyingBird.element.parentNode.removeChild(flyingBird.element);\n            }\n            birds = [];\n            skySpots.fill(false);\n            setCurrentStage(\"combined\");\n        }, 2000);\n\n\n    }\n\n    update() {\n        const targetY = this.active ? 2300 : 3600;\n        const newY = this.y * 0.9 + targetY * 0.1;\n        if (Math.abs(this.y - newY) > 0.1) {\n            this.element.style.top = `${newY}px`;\n        }\n\n        if (this.y < 3400 && newY > 3400 && !this.active) {\n            this.element.style.display = \"none\";\n            this.blackout.style.display = \"none\";\n        }\n\n        const blackoutTargetAlpha = this.active ? 1 : 0;\n        const newBlackoutAlpha = this.lastBlackoutAlpha * 0.9 + blackoutTargetAlpha * 0.1;\n        if (Math.abs(this.lastBlackoutAlpha - newBlackoutAlpha) > 0.01) {\n            this.blackout.style.opacity = newBlackoutAlpha;\n            this.lastBlackoutAlpha = newBlackoutAlpha;\n        }\n\n        this.y = newY;\n\n        if (this.active) {\n            this.carryingBird1.update();\n            this.carryingBird2.update();\n\n            setTransform(this.element, `translate(${this.carryingBird1.x}px, ${this.carryingBird1.y}px) rotate(${this.carryingBird1.angle}rad)`);\n\n            const y = -397;\n            setTransform(this.carryingBird1.element, `translate(-65px, ${y}px)`);\n            setTransform(this.carryingBird2.element, `translate(318px, ${y}px)`);\n\n            for (const sittingBird of this.sittingBirds) {\n                sittingBird.update();\n            }\n            setTransform(this.sittingBirds[0].element, `translate(20px, ${y}px) rotate(${this.sittingBirds[0].angle}rad)`);\n            setTransform(this.sittingBirds[1].element, `translate(130px, ${y}px) rotate(${this.sittingBirds[1].angle}rad)`);\n            setTransform(this.sittingBirds[2].element, `translate(210px, ${y}px) rotate(${this.sittingBirds[2].angle}rad)`);\n\n            this.unhelpfulBird1.update();\n            this.unhelpfulBird2.update();\n            setTransform(this.unhelpfulBird1.element, `translate(${-105 + this.unhelpfulBird1.x}px, ${-265 + this.unhelpfulBird1.y}px) rotate(${-this.carryingBird1.angle + this.unhelpfulBird1.angle}rad)`);\n            setTransform(this.unhelpfulBird2.element, `translate(${350 + this.unhelpfulBird2.x}px, ${-160 + this.unhelpfulBird2.y}px) rotate(${-this.carryingBird1.angle + this.unhelpfulBird2.angle}rad)`);\n\n            this.hue = (this.hue + 2) % 360;\n            this.youDidIt.style.color = `hsl(${this.hue}, 90%, 60%)`;\n        }\n    }\n}\n\nlet birds = [];\n\nlet onesPosts = [];\nconst firstFence = document.getElementById(\"first-fence\");\nfor (let postIndex = 0; postIndex < 9; postIndex++) {\n    onesPosts.push(new Post(firstFence, firstFencePostOriginX + postIndex * (Post.width() + fencePostSpacing), onesFencePostY));\n}\nonesPosts[0].prompt = true;\nconst combinedPosts = [];\n\nconst waves = [];\nconst waveElements = document.querySelectorAll(\".wave\");\nfor (let waveIndex = 0; waveIndex < waveElements.length; waveIndex++) {\n    waves.push(new Wave(waveElements.item(waveIndex)));\n}\n\nconst powerLine1 = new PowerLine(755, -484, 1788.5, 298.5, 1248, 374.5, 1266, 27, 1208);\nconst powerLine2 = new PowerLine(755, -410, 1788.5, 298.5, 1320, 374.5, 1338, 27, 1279);\nconst powerLine3 = new PowerLine(755, -338, 1788.5, 298.5, 1392, 374.5, 1410, 27, 1349, [powerLine1, powerLine2]);\nconst powerLine4 = new PowerLine(726, 157, 1998.5, 221, 2082, 297, 2104, -43, 2056);\nconst powerLine5 = new PowerLine(726, 220, 1998.5, 221, 2155, 297, 2177, -43, 2126);\nconst powerLine6 = new PowerLine(726, 297.5, 1998.5, 221, 2229, 297, 2259, -43, 2196, [powerLine4, powerLine5]);\n\nconst powerLines = [\n    powerLine1,\n    powerLine2,\n    powerLine3,\n    powerLine4,\n    powerLine5,\n    powerLine6\n];\nfor (var i = 0; i < 6; i++) {\n    powerLines[i].setEnabled(false);\n}\nconst scrollDownArrow = new ScrollDownArrow(680);\n\nconst playAgain = new PlayAgain();\n\nlet currentStage;\nsetCurrentStage(\"ones\");\n// setCurrentStage(\"transition-to-tens\");\n// setCurrentStage(\"tens\");\n// setCurrentStage(\"transition-to-combined\");\n// setCurrentStage(\"combined\");\n// setCurrentStage(\"complete\");\nlet numberOfBirdsWhenStartingCombinedStage;\n\nfunction goToNextStage() {\n    const transitions = {\n        \"ones\": \"transition-to-tens\",\n        \"transition-to-tens\": \"tens\",\n        \"tens\": \"transition-to-combined\",\n        \"transition-to-combined\": \"combined\",\n        \"combined\": \"complete\",\n    };\n    setCurrentStage(transitions[currentStage]);\n}\n\nfunction setCurrentStage(newStage) {\n    switch (newStage) {\n        case \"transition-to-tens\":\n            for (var birdIndex = birds.length; birdIndex < 10; birdIndex++) {\n                addBird();\n            }\n            setTimeout(() => {\n                scrollDownArrow.enabled = true;\n            }, 2500);\n            break;\n        case \"tens\":\n            skySlotsY = tensSkySlotsY;\n            for (var bird of birds) {\n                bird.flyAway();\n            }\n\n            onesPosts = [];\n            birdsFlyingCounter.targetY = tensSkySlotsY + 20;\n            totalCounter.targetY = 1790;\n            onesFencePostCounter.enabled = false;\n\n            powerLines[0].prompt = true;\n            for (var i = 0; i < 3; i++) {\n                powerLines[i].setEnabled(true);\n            }\n            break;\n        case \"transition-to-combined\":\n            scrollDownArrow.anchorY = 1650;\n            break;\n        case \"combined\":\n            for (var i = 0; i < 6; i++) {\n                powerLines[i].setEnabled(i >= 3);\n            }\n\n            const secondFence = document.getElementById(\"second-fence\");\n            for (let postIndex = 0; postIndex < 9; postIndex++) {\n                combinedPosts.push(new Post(secondFence, firstFencePostOriginX + postIndex * (Post.width() + fencePostSpacing), combinedFencePostY));\n            }\n            combinedFencePostCounter.enabled = true;\n\n            skySlotsY = combinedSkySlotsY;\n            birdsFlyingCounter.targetY = skySlotsY + 20;\n\n            for (var birdIndex = 0; birdIndex < 30 && birdIndex < birds.length; birdIndex++) {\n                const bird = birds[birdIndex];\n                bird.targetX = (Math.random() > 0.5) ? -canvas.width / 6.0 : canvas.width * 1.15;\n                skySpots[bird.positionIndex] = false;\n                bird.active = false;\n            }\n            for (var birdIndex = birds.length; birdIndex < 5; birdIndex++) {\n                addBird();\n            }\n\n            for (const flyingBird of birds) {\n                if (flyingBird.active) {\n                    flyingBird.flyAway();\n                }\n            }\n\n            totalCounter.targetY = 2700;\n            numberOfBirdsWhenStartingCombinedStage = birds.length;\n\n            break;\n        case \"complete\":\n            setTimeout(() => {\n                playAgain.active = true;\n            }, 2000);\n            break;\n    }\n    currentStage = newStage;\n}\n\n\nfunction addBird() {\n    const bird = new Bird(-Bird.width(), skySlotsY);\n    bird.flyAway();\n    birds.push(bird);\n}\n\n\nlet dateWhenSkyEmptied = null;\n\nfunction drawScene() {\n    mamaCloud.currentX -= 0.3;\n    if (mamaCloud.currentX < -(mamaCloud.width + 100)) {\n        mamaCloud.currentX = canvas.width;\n    }\n    mamaCloud.style.left = mamaCloud.currentX + \"px\";\n\n    weeCloud.currentX -= 0.5;\n    if (weeCloud.currentX < -(weeCloud.width + 100)) {\n        weeCloud.currentX = canvas.width;\n    }\n    weeCloud.style.left = weeCloud.currentX + \"px\";\n\n    for (var post of onesPosts) {\n        post.update();\n    }\n\n    for (var wave of waves) {\n        wave.update();\n    }\n\n    for (var post of combinedPosts) {\n        post.update();\n    }\n\n    for (var bird of birds) {\n        bird.update();\n    }\n\n    const numberOfBirdsInSky = skySpots.filter((el) => {\n        return el === true;\n    }).length;\n    if (numberOfBirdsInSky === 0 && !suppressNextBirdSequence) {\n        if (birds.length === 0 || (dateWhenSkyEmptied !== null && (Date.now() - dateWhenSkyEmptied) > 750)) {\n            if (currentStage === \"ones\") {\n                addBird();\n                if (birds.length >= 10) {\n                    goToNextStage();\n                }\n            } else if (currentStage === \"tens\") {\n                if (birds.length < 30) {\n                    for (var i = 0; i < 10; i++) {\n                        addBird();\n                    }\n                } else {\n                    for (var i = 0; i < 5; i++) {\n                        addBird();\n                    }\n                }\n                if (birds.length > 30) {\n                    goToNextStage();\n                }\n            } else if (currentStage === \"combined\") {\n                const sequence = [8, 3, 7, 5, 9, 2];\n                let accumulator = numberOfBirdsWhenStartingCombinedStage;\n                for (const quantity of sequence) {\n                    if (birds.length >= accumulator && birds.length < accumulator + quantity) {\n                        for (var i = 0; i < quantity; i++) {\n                            addBird();\n                        }\n                        break;\n                    }\n                    accumulator += quantity;\n                }\n                if (accumulator === numberOfBirdsWhenStartingCombinedStage + sequence.reduce((acc, el) => {\n                    return acc + el;\n                })) {\n                    goToNextStage();\n                }\n            }\n            dateWhenSkyEmptied = null;\n        } else if (dateWhenSkyEmptied === null) {\n            dateWhenSkyEmptied = Date.now();\n        }\n    }\n\n    scrollDownArrow.update();\n\n    updateCounterValues();\n    birdsFlyingCounter.update();\n    birdsFlyingCounter.draw();\n    onesFencePostCounter.update();\n    onesFencePostCounter.draw();\n    combinedFencePostCounter.update();\n    combinedFencePostCounter.draw();\n\n    totalCounter.update();\n    totalCounter.draw();\n\n    for (var powerLine of powerLines) {\n        powerLine.update();\n        powerLine.draw();\n    }\n\n    if (currentStage === \"transition-to-tens\") {\n        if (onesFencePostCounter.y - birdsFlyingCounter.y < 120) {\n            goToNextStage();\n        }\n    } else if (currentStage === \"transition-to-combined\") {\n        if (window.scrollY > 1460) {\n            goToNextStage();\n        }\n    }\n\n    playAgain.update();\n\n    applyCursor();\n    cursor = \"initial\";\n}\n\nlet cursor = \"initial\";\nlet lastCursor = cursor;\n\nfunction applyCursor() {\n    if (cursor !== lastCursor) {\n        rootContainer.style.cursor = cursor;\n        lastCursor = cursor;\n    }\n}\n\nfunction rectContainsMouse(x, y, width, height) {\n    return (Mouse.x >= x) &&\n        (Mouse.y >= y) &&\n        (Mouse.x < (x + width)) &&\n        (Mouse.y < (y + height));\n}\n\nfunction setTransform(element, transformString) {\n    element.style.transform = transformString;\n    element.style.webkitTransform = transformString;\n}\n\nconst sizeWarning = document.getElementById(\"size-warning\");\nconst sizeWarningText = document.getElementById(\"size-warning-text\");\nwindow.onresize = () => {\n    const minWidth = 1000;\n    const minHeight = 680;\n\n\n    if (window.screen.availWidth < minWidth || window.screen.availHeight < minHeight) {\n        sizeWarningText.innerHTML = \"We're sorry, but this screen is too small for this activity. Please give it a try on a device with a larger screen.\";\n        sizeWarning.style.display = \"block\";\n    } else {\n        sizeWarning.style.display = (window.innerWidth < 1000 || window.innerHeight <= 680) ? \"block\" : \"none\";        \n        const scalingFactor = Math.min(1.0, Math.max(1000, window.innerWidth) / 1366);\n        Mouse.scalingFactor = scalingFactor;\n        rootContainer.style.transform = `scale(${scalingFactor})`;\n    }\n};\nwindow.onresize();\n\n\nwindow.requestAnimFrame = window.requestAnimationFrame ||\n    function(callback) {\n        window.setTimeout(callback, 1000 / 60);\n    };\n(function animloop() {\n    requestAnimFrame(animloop);\n    drawScene();\n})();"]}